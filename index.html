<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Subzero Hellfrost Riders Swag</title>
<style>
/* ---------------------- BODY ---------------------- */
body {
  font-family: Arial, sans-serif;
  max-width: 700px;
  margin: auto;
  padding: 20px;
  color: #fff;
  text-align: center;
  background: #000;
  position: relative;
  overflow-x: hidden;
}

/* ---------------------- SHIMMERING ICE ---------------------- */
#iceContainer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
  z-index: 0;
}

.iceShard {
  position: absolute;
  width: 1px;
  height: 10px;
  background: linear-gradient(to bottom, #fff, #FFD700);
  opacity: 0.6;
  border-radius: 50%;
  box-shadow: 0 0 6px #fff, 0 0 10px #FFD700;
  animation: fall linear infinite;
}

@keyframes fall {
  0% { transform: translateY(-20px) rotate(0deg); opacity: 0; }
  25% { opacity: 0.5; }
  50% { opacity: 0.9; }
  75% { opacity: 0.5; }
  100% { transform: translateY(100vh) rotate(360deg); opacity:0; }
}

/* ---------------------- TITLE ---------------------- */
h1 {
  position: relative;
  color: #FFD700;
  text-shadow: 0 0 5px #FFD700, 0 0 15px #FFD700, 0 0 30px rgba(255,215,0,0.7);
  z-index: 2;
}

/* ---------------------- PREVIEW BOX ---------------------- */
.preview-container {
  display: flex;
  justify-content: space-between;
  margin: 20px 0;
  border: 2px solid #FFD700;
  border-radius: 10px;
  padding: 10px;
  background-color: #111;
  flex-wrap: wrap;
  position: relative;
  z-index: 2;
  box-shadow: 0 0 20px #FFD700, 0 0 40px rgba(255,215,0,0.3), inset 0 0 25px rgba(255,215,0,0.2);
}

.preview-section {
  flex: 1;
  min-width: 250px;
  margin: 5px;
}

.preview-section img {
  width: 100%;
  border-radius: 5px;
}

.caption {
  background-color: rgba(0,0,0,0.85);
  color: #FFD700;
  font-weight: bold;
  padding: 5px;
  text-transform: uppercase;
  margin-top: 5px;
}

label {
  display: block;
  margin-top: 10px;
  font-weight: bold;
  text-align: left;
  color: #fff;
}

input, select, textarea {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
  border: 1px solid #FFD700;
  border-radius: 5px;
  background-color: #111;
  color: #fff;
  position: relative;
  z-index: 2;
}

button {
  background-color: #000;
  color: #FFD700;
  border: 2px solid #FFD700;
  cursor: pointer;
  margin-top: 10px;
  font-size: 16px;
  border-radius: 5px;
  font-weight: bold;
  padding: 8px;
  transition: 0.3s ease;
  position: relative;
  z-index: 2;
}

button:hover {
  box-shadow: 0 0 12px #FFD700;
  transform: translateY(-2px);
}

#cartItems {
  margin-top: 15px;
  text-align: left;
  border: 1px solid #FFD700;
  padding: 10px;
  border-radius: 5px;
  max-height: 200px;
  overflow-y: auto;
  background-color: #111;
  position: relative;
  z-index: 2;
}

#cartItems li {
  display: flex;
  justify-content: space-between;
  margin-bottom: 5px;
}

.removeBtn {
  background-color: #330000;
  border: 1px solid red;
  color: red;
  font-size: 12px;
  padding: 2px 5px;
  border-radius: 3px;
  cursor: pointer;
  margin-left: 10px;
}

#total {
  font-weight: bold;
  margin-top: 10px;
  text-align: right;
  color: #FFD700;
  font-size: 1.1em;
  position: relative;
  z-index: 2;
}
</style>
</head>
<body>

<h1>Subzero Hellfrost Riders Swag</h1>

<div id="iceContainer"></div>

<div class="preview-container">
  <div class="preview-section">
    <img id="frontImage" alt="Front" style="display:none;">
    <div class="caption" id="frontCaption">Please make a selection</div>
  </div>
  <div class="preview-section">
    <img id="backImage" alt="Back Patch" style="display:none;">
    <div class="caption" id="backCaption">Please make a selection</div>
  </div>
</div>

<form id="orderForm" style="position: relative; z-index:2;">
<label>Item:</label>
<select name="item">
  <option value="T-Shirt">T-Shirt</option>
</select>

<label>Size:</label>
<select name="size" id="sizeSelect" required>
  <option value="S">S</option>
  <option value="M">M</option>
  <option value="L">L</option>
  <option value="XL">XL</option>
  <option value="2XL">2XL</option>
  <option value="3XL">3XL</option>
  <option value="4XL">4XL</option>
  <option value="5XL">5XL</option>
</select>

<label>Front:</label>
<select id="frontSelect" required>
  <option value="" disabled selected>Select front</option>
  <option value="a">Option A</option>
  <option value="b">Option B</option>
  <option value="c">Option C</option>
  <option value="d">Option D</option>
  <option value="e">Option E</option>
</select>

<label>Back Patch:</label>
<select id="backSelect" required>
  <option value="" disabled selected>Select back patch</option>
  <option value="brother">Brother</option>
  <option value="hearts">Hearts</option>
  <option value="support">Support</option>
</select>

<label>Sleeve:</label>
<select id="sleeveSelect" required>
  <option value="" disabled selected>Select sleeve</option>
  <option value="Short Sleeve">Short Sleeve</option>
  <option value="Long Sleeve">Long Sleeve</option>
</select>

<label>Shirt Color:</label>
<select id="colorSelect" required>
  <option value="" disabled selected>Select color</option>
  <option value="White">White</option>
  <option value="Black">Black</option>
</select>

<label>Quantity:</label>
<input type="number" id="quantity" min="1" value="1" required>

<button type="button" id="addToCartBtn">Add to Cart</button>
</form>

<div id="cartItems">
  <strong>Cart:</strong>
  <ul id="cartList"></ul>
  <div style="color:#FFD700; font-style:italic; margin-top:5px;">
    *Prices include shipping<br>
    *Funds are not taken at the time of order placement
  </div>
</div>

<p id="total">Total: $0.00</p>

<!-- ---------------- CUSTOMER INFO FORM ---------------- -->
<div style="position: relative; z-index: 2; margin-top: 20px;">
  <label>Name:</label>
  <input id="customerName" required>

  <label>Road Name (Optional):</label>
  <input id="customerRoad" placeholder="Optional">

  <label>Street Address:</label>
  <textarea id="customerAddress" required></textarea>

  <label>City:</label>
  <input id="customerCity" required>

  <label>State:</label>
  <input id="customerState" required>

  <label>Zip Code:</label>
  <input id="customerZip" required>

  <label>Email:</label>
  <input id="customerEmail" type="email" required>

  <label>Phone:</label>
  <input id="customerPhone" required>

  <label>Notes:</label>
  <textarea id="customerNotes" placeholder="Example: black out rockers"></textarea>

  <button id="submitOrderBtn">Submit Order</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
emailjs.init("aQIlRxnSDExbWv09B");

// Base price
const basePrices = { "T-Shirt": { S:35, M:35, L:35, XL:35, "2XL":37, "3XL":38, "4XL":39, "5XL":39 } };
let cart = [];

// Elements
const frontSelect = document.getElementById("frontSelect");
const backSelect = document.getElementById("backSelect");
const sleeveSelect = document.getElementById("sleeveSelect");
const colorSelect = document.getElementById("colorSelect");
const frontImage = document.getElementById("frontImage");
const backImage = document.getElementById("backImage");
const frontCaption = document.getElementById("frontCaption");
const backCaption = document.getElementById("backCaption");
const sizeSelect = document.getElementById("sizeSelect");
const quantityInput = document.getElementById("quantity");
const cartList = document.getElementById("cartList");
const totalDisplay = document.getElementById("total");

// Ice generation
const iceContainer = document.getElementById('iceContainer');
const iceCount = 120;
for(let i=0; i<iceCount; i++){
  const ice = document.createElement('div');
  ice.classList.add('iceShard');
  ice.style.left = Math.random() * 100 + 'vw';
  ice.style.top = Math.random() * -100 + 'vh';
  ice.style.width = 1 + Math.random()*3 + 'px';
  ice.style.height = 5 + Math.random()*20 + 'px';
  ice.style.animationDuration = 3 + Math.random()*4 + 's';
  ice.style.animationDelay = Math.random()*5 + 's';
  ice.style.opacity = 0.3 + Math.random()*0.7;
  iceContainer.appendChild(ice);
}

// Preview images
function loadImage(imgElement, baseName) {
  const extensions = ["png","jpg","JPG","PNG"];
  let loaded = false;
  extensions.forEach(ext => {
    if(!loaded){
      const testImg = new Image();
      testImg.onload = ()=>{ imgElement.src = `${baseName}.${ext}`; loaded=true; };
      testImg.src = `${baseName}.${ext}`;
    }
  });
}

function updatePreview(){
  const front = frontSelect.value;
  const back = backSelect.value;
  if(front){
    loadImage(frontImage, front);
    frontImage.style.display = "block";
    frontCaption.textContent = `Front: ${front.toUpperCase()}`;
  } else {
    frontImage.src = "";
    frontImage.style.display = "none";
    frontCaption.textContent = "Please make a selection";
  }
  if(back){
    loadImage(backImage, back);
    backImage.style.display = "block";
    backCaption.textContent = `Back Patch: ${back.charAt(0).toUpperCase() + back.slice(1)}`;
  } else {
    backImage.src = "";
    backImage.style.display = "none";
    backCaption.textContent = "Please make a selection";
  }
}

frontSelect.addEventListener("change", updatePreview);
backSelect.addEventListener("change", updatePreview);

// Cart functions
function updateCart(){
  cartList.innerHTML = "";
  let total=0;
  cart.forEach((item,index)=>{
    const lineTotal = item.price*item.quantity;
    total+=lineTotal;
    const li = document.createElement("li");
    li.innerHTML = `
      ${item.quantity}x ${item.item} (${item.size}) - Front ${item.front} / Back ${item.back} - Sleeve: ${item.sleeve} - Color: ${item.color} - $${lineTotal.toFixed(2)}
      <button class="removeBtn" onclick="removeItem(${index})">Remove</button>
    `;
    cartList.appendChild(li);
  });
  totalDisplay.textContent = `Total: $${total.toFixed(2)}`;
}

function removeItem(index){ cart.splice(index,1); updateCart(); }

document.getElementById("addToCartBtn").addEventListener("click",()=>{
  const item="T-Shirt";
  const size=sizeSelect.value;
  const front=frontSelect.value;
  const back=backSelect.value;
  const sleeve=sleeveSelect.value;
  const color=colorSelect.value;
  const quantity=parseInt(quantityInput.value);
  if(!size || !front || !back || !sleeve || !color || quantity<1) return;
  const price = basePrices[item][size];
  cart.push({item,size,front,back,sleeve,color,quantity,price});
  updateCart();
  quantityInput.value=1;
  frontSelect.selectedIndex=0;
  backSelect.selectedIndex=0;
  sleeveSelect.selectedIndex=0;
  colorSelect.selectedIndex=0;
  updatePreview();
});

// ------------------- SUBMIT ORDER -------------------
document.getElementById("submitOrderBtn").addEventListener("click", () => {
  if (cart.length === 0) { alert("Please add items to cart."); return; }

  const total = cart.reduce((sum, i) => sum + i.price*i.quantity, 0);

  // Build order table
  const orderTable = `
    <table style="width:100%; border-collapse: collapse; text-align:left; font-family: Arial, sans-serif; background-color:#111; color:#FFD700;">
      <thead>
        <tr style="border-bottom:2px solid #FFD700;">
          <th style="padding:8px; border:1px solid #FFD700;">Qty</th>
          <th style="padding:8px; border:1px solid #FFD700;">Item</th>
          <th style="padding:8px; border:1px solid #FFD700;">Size</th>
          <th style="padding:8px; border:1px solid #FFD700;">Front</th>
          <th style="padding:8px; border:1px solid #FFD700;">Back</th>
          <th style="padding:8px; border:1px solid #FFD700;">Sleeve</th>
          <th style="padding:8px; border:1px solid #FFD700;">Color</th>
          <th style="padding:8px; border:1px solid #FFD700;">Price</th>
        </tr>
      </thead>
      <tbody>
        ${cart.map(i => `
          <tr style="border-bottom:1px solid #FFD700;">
            <td style="padding:5px; border:1px solid #FFD700;">${i.quantity}</td>
            <td style="padding:5px; border:1px solid #FFD700;">${i.item}</td>
            <td style="padding:5px; border:1px solid #FFD700;">${i.size}</td>
            <td style="padding:5px; border:1px solid #FFD700;">${i.front}</td>
            <td style="padding:5px; border:1px solid #FFD700;">${i.back}</td>
            <td style="padding:5px; border:1px solid #FFD700;">${i.sleeve}</td>
            <td style="padding:5px; border:1px solid #FFD700;">${i.color}</td>
            <td style="padding:5px; border:1px solid #FFD700;">$${(i.price*i.quantity).toFixed(2)}</td>
          </tr>
        `).join('')}
        <tr>
          <td colspan="7" style="padding:8px; text-align:right; font-weight:bold; border:1px solid #FFD700;">Total</td>
          <td style="padding:8px; font-weight:bold; border:1px solid #FFD700;">$${total.toFixed(2)}</td>
        </tr>
      </tbody>
    </table>
  `;

  // ---------------- COMBINE ADDRESS ----------------
  const road = document.getElementById("customerRoad").value.trim();
  const street = document.getElementById("customerAddress").value.trim();
  const city = document.getElementById("customerCity").value.trim();
  const state = document.getElementById("customerState").value.trim();
  const zip = document.getElementById("customerZip").value.trim();

  let address = '';
  if(road) address += road + ' ';
  if(street) address += street;
  if(city || state || zip) address += ', ';
  if(city) address += city;
  if(state) address += ', ' + state;
  if(zip) address += ' ' + zip;

  console.log('Combined Address:', address); // âœ… check in browser console

  const data = {
    name: document.getElementById("customerName").value,
    email: document.getElementById("customerEmail").value,
    phone: document.getElementById("customerPhone").value,
    address: address,
    notes: document.getElementById("customerNotes").value,
    order: orderTable,
    total: `$${total.toFixed(2)}`
  };

  emailjs.send("service_ftlegjv", "template_42
