<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Subzero Hellfrost Riders Swag</title>
<style>
body {
  font-family: Arial, sans-serif;
  max-width: 700px;
  margin: auto;
  padding: 20px;
  background-color: #000;
  color: #fff;
  text-align: center;
}

h1 {
  color: #00bfff;
  text-shadow: 0 0 10px #00bfff;
}

.preview-container {
  display: flex;
  justify-content: space-between;
  margin: 20px 0;
  border: 2px solid gold;
  border-radius: 10px;
  padding: 10px;
  box-shadow: 0 0 15px #00bfff;
  background-color: #111;
  flex-wrap: wrap;
}

.preview-section {
  flex: 1;
  min-width: 250px;
  margin: 5px;
}

.preview-section img {
  width: 100%;
  border-radius: 5px;
}

.caption {
  background-color: rgba(0,0,0,0.8);
  color: gold;
  font-weight: bold;
  padding: 5px;
  text-transform: uppercase;
  margin-top: 5px;
}

label {
  display: block;
  margin-top: 10px;
  font-weight: bold;
  text-align: left;
}

input, select, textarea {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
  border: 1px solid gold;
  border-radius: 5px;
  background-color: #111;
  color: #fff;
}

button {
  background-color: #000;
  color: gold;
  border: 2px solid gold;
  cursor: pointer;
  margin-top: 10px;
  font-size: 16px;
  border-radius: 5px;
  font-weight: bold;
  padding: 8px;
}

#cartItems {
  margin-top: 15px;
  text-align: left;
  border: 1px solid gold;
  padding: 10px;
  border-radius: 5px;
  max-height: 200px;
  overflow-y: auto;
  background-color: #111;
}

#cartItems li {
  display: flex;
  justify-content: space-between;
  margin-bottom: 5px;
}

.removeBtn {
  background-color: #330000;
  border: 1px solid red;
  color: red;
  font-size: 12px;
  padding: 2px 5px;
  border-radius: 3px;
  cursor: pointer;
  margin-left: 10px;
}

#total {
  font-weight: bold;
  margin-top: 10px;
  text-align: right;
  color: #00bfff;
  font-size: 1.1em;
}
</style>
</head>
<body>

<h1>Subzero Hellfrost Riders Swag</h1>

<div class="preview-container">
  <div class="preview-section">
    <img id="frontImage" alt="Front" style="display:none;">
    <div class="caption" id="frontCaption">Please make a selection</div>
  </div>
  <div class="preview-section">
    <img id="backImage" alt="Back Patch" style="display:none;">
    <div class="caption" id="backCaption">Please make a selection</div>
  </div>
</div>

<form id="orderForm">
<label>Item:</label>
<select name="item">
  <option value="T-Shirt">T-Shirt</option>
</select>

<label>Size:</label>
<select name="size" id="sizeSelect" required>
  <option value="S">S</option>
  <option value="M">M</option>
  <option value="L">L</option>
  <option value="XL">XL</option>
  <option value="2XL">2XL</option>
  <option value="3XL">3XL</option>
  <option value="4XL">4XL</option>
  <option value="5XL">5XL</option>
</select>

<label>Front:</label>
<select id="frontSelect" required>
  <option value="" disabled selected>Select front</option>
  <option value="a">Option A</option>
  <option value="b">Option B</option>
  <option value="c">Option C</option>
  <option value="d">Option D</option>
  <option value="e">Option E</option>
</select>

<label>Back Patch:</label>
<select id="backSelect" required>
  <option value="" disabled selected>Select back patch</option>
  <option value="brother">Brother</option>
  <option value="hearts">Hearts</option>
  <option value="support">Support</option>
</select>

<label>Sleeve:</label>
<select id="sleeveSelect" required>
  <option value="" disabled selected>Select sleeve</option>
  <option value="Short Sleeve">Short Sleeve</option>
  <option value="Long Sleeve">Long Sleeve</option>
</select>

<label>Shirt Color:</label>
<select id="colorSelect" required>
  <option value="" disabled selected>Select color</option>
  <option value="White">White</option>
  <option value="Black">Black</option>
</select>

<label>Quantity:</label>
<input type="number" id="quantity" min="1" value="1" required>

<button type="button" id="addToCartBtn">Add to Cart</button>
</form>

<div id="cartItems">
  <strong>Cart:</strong>
  <ul id="cartList"></ul>
  <div style="color:#00bfff; font-style:italic; margin-top:5px;">
    *Prices include shipping<br>
    *Funds are not taken at the time of order placement
  </div>
</div>

<p id="total">Total: $0.00</p>

<label>Name:</label>
<input id="customerName" required>

<label>Email:</label>
<input id="customerEmail" type="email" required>

<label>Phone:</label>
<input id="customerPhone" required>

<label>Shipping Address:</label>
<textarea id="customerAddress" required></textarea>

<label>Notes:</label>
<textarea id="customerNotes" placeholder="Example: black out rockers"></textarea>

<button id="submitOrderBtn">Submit Order</button>

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
emailjs.init("aQIlRxnSDExbWv09B");

const basePrices = { "T-Shirt": { S:35, M:35, L:35, XL:35, "2XL":37, "3XL":38, "4XL":39, "5XL":39 } };
let cart = [];

const frontSelect = document.getElementById("frontSelect");
const backSelect = document.getElementById("backSelect");
const sleeveSelect = document.getElementById("sleeveSelect");
const colorSelect = document.getElementById("colorSelect");
const frontImage = document.getElementById("frontImage");
const backImage = document.getElementById("backImage");
const frontCaption = document.getElementById("frontCaption");
const backCaption = document.getElementById("backCaption");
const sizeSelect = document.getElementById("sizeSelect");
const quantityInput = document.getElementById("quantity");
const cartList = document.getElementById("cartList");
const totalDisplay = document.getElementById("total");

function loadImage(imgElement, baseName) {
  const extensions = ["png","jpg","JPG","PNG"];
  let loaded = false;
  extensions.forEach(ext => {
    if(!loaded){
      const testImg = new Image();
      testImg.onload = ()=>{ imgElement.src = `${baseName}.${ext}`; loaded=true; };
      testImg.src = `${baseName}.${ext}`;
    }
  });
}

function updatePreview(){
  const front = frontSelect.value;
  const back = backSelect.value;

  if(front){
    loadImage(frontImage, front);
    frontImage.style.display = "block";
    frontCaption.textContent = `Front: ${front.toUpperCase()}`;
  } else {
    frontImage.src = "";
    frontImage.style.display = "none";
    frontCaption.textContent = "Please make a selection";
  }

  if(back){
    loadImage(backImage, back);
    backImage.style.display = "block";
    backCaption.textContent = `Back Patch: ${back.charAt(0).toUpperCase() + back.slice(1)}`;
  } else {
    backImage.src = "";
    backImage.style.display = "none";
    backCaption.textContent = "Please make a selection";
  }
}

frontSelect.addEventListener("change", updatePreview);
backSelect.addEventListener("change", updatePreview);

function updateCart(){
  cartList.innerHTML = "";
  let total=0;
  cart.forEach((item,index)=>{
    const lineTotal = item.price*item.quantity;
    total+=lineTotal;
    const li = document.createElement("li");
    li.innerHTML = `
      ${item.quantity}x ${item.item} (${item.size}) - Front ${item.front} / Back ${item.back} - Sleeve: ${item.sleeve} - Color: ${item.color} - $${lineTotal.toFixed(2)}
      <button class="removeBtn" onclick="removeItem(${index})">Remove</button>
    `;
    cartList.appendChild(li);
  });
  totalDisplay.textContent = `Total: $${total.toFixed(2)}`;
}

function removeItem(index){ cart.splice(index,1); updateCart(); }

document.getElementById("addToCartBtn").addEventListener("click",()=>{
  const item="T-Shirt";
  const size=sizeSelect.value;
  const front=frontSelect.value;
  const back=backSelect.value;
  const sleeve=sleeveSelect.value;
  const color=colorSelect.value;
  const quantity=parseInt(quantityInput.value);
  if(!size || !front || !back || !sleeve || !color || quantity<1) return;
  const price = basePrices[item][size];
  cart.push({item,size,front,back,sleeve,color,quantity,price});
  updateCart();
  quantityInput.value=1;
  frontSelect.selectedIndex=0;
  backSelect.selectedIndex=0;
  sleeveSelect.selectedIndex=0;
  colorSelect.selectedIndex=0;
  updatePreview();
});

document.getElementById("submitOrderBtn").addEventListener("click",()=>{
  if(cart.length===0){ alert("Please add items to cart."); return; }
  const total = cart.reduce((sum,i)=>sum+i.price*i.quantity,0);
  const orderDetails = cart.map(i=>`${i.quantity}x ${i.item} (${i.size}) - Front ${i.front} / ${i.back} - Sleeve: ${i.sleeve} - Color: ${i.color}`).join("\n");
  const data = {
    name:document.getElementById("customerName").value,
    email:document.getElementById("customerEmail").value,
    phone:document.getElementById("customerPhone").value,
    address:document.getElementById("customerAddress").value,
    notes:document.getElementById("customerNotes").value,
    order:orderDetails,
    total:`$${total.toFixed(2)}`
  };
  emailjs.send("service_ftlegjv","template_42rdq3n",data)
    .then(()=>{ 
      alert("✅ Thank you! A Brother will be in touch to confirm your order."); 
      cart=[]; updateCart();
      document.getElementById("customerName").value='';
      document.getElementById("customerEmail").value='';
      document.getElementById("customerPhone").value='';
      document.getElementById("customerAddress").value='';
      document.getElementById("customerNotes").value='';
      quantityInput.value=1;
      frontSelect.selectedIndex=0;
      backSelect.selectedIndex=0;
      sleeveSelect.selectedIndex=0;
      colorSelect.selectedIndex=0;
      updatePreview();
    })
    .catch(()=>alert("❌ Error sending order. Please try again."));
});

updatePreview();
</script>
</body>
</html>